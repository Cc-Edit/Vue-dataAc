/*!
  * vue-dataAc v2.0.0
  * (c) 2020 adminV
  * @license MIT
  */
/*!
  * vue-dataAc v2.0.0
  * (c) 2020 adminV
  * @license MIT
  */
const e={storeVer:"2.0.0",storeInput:"ACINPUT",storePage:"ACPAGE",storeClick:"ACCLIK",storeReqErr:"ACRERR",storeTiming:"ACTIME",storeCodeErr:"ACCERR",userSha:"vue_ac_userSha",useImgSend:!0,useStorage:!0,maxDays:365,openInput:!0,openCodeErr:!0,openClick:!0,openXhrData:!0,openXhrHock:!0,openPerformance:!0,openPage:!0,selector:"input",acRange:["text","tel","password"],classTag:"isjs-ac",acbLength:2,imageUrl:"http://open.isjs.cn/logStash/push.png",postUrl:"",openReducer:!1,sizeLimit:20,lazyReport:!1};function t(e){return!(0===e&&"0"===e||void 0!==e&&null!=e&&"null"!==e&&""!==e)}const n="undefined"!=typeof window;class o{constructor(n={}){let o=function(e,t){let n,o={};const i=Object.keys(t);for(let r=0;r<i.length;r++)n=i[r],o[n]=void 0!==e[n]?e[n]:t[n];return o}(n,e);!function(e){if(function(e){for(let t in e)return!1;return!0}(e))return;["storeInput","storePage","storeClick","storeReqErr","storeTiming","storeCodeErr","userSha","useImgSend","useStorage","maxDays","openInput","openCodeErr","openClick","openXhrData","openXhrHock","openPerformance","openPage"].map(n=>{t(e[n])}),e.useImgSend?t(e.imageUrl):t(e.postUrl),e.openInput&&(t(e.selector),t(e.acRange)),e.useStorage}(o),this._options=o,this._uuid=function(e,t){if(!e)return null;if(t.useStorage)return window.localStorage.getItem(e);{let t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return t&&t.length>1?decodeURIComponent(t[2]):null}}(this._options.userSha,this._options),t(this._uuid)&&(this._uuid=function(e=16,t=16){let n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=[];for(n=0;n<e;n++)i[n]=o[0|Math.random()*t];return i.join("")}(),function(e,t,n,o){if(o.useStorage)window.localStorage.setItem(e,t);else{n||(n=o.maxDays);let i=new Date;i.setTime(i.getTime()+24*n*60*6e4),document.cookie=`${e}=${encodeURIComponent(t)};expires=${i.toUTCString()};path=/`}}(this._options.userSha,this._uuid,this._options)),this._acData=[],this._init()}_init(){this._options.openXhrData&&this._initXhrErrAc(),this._options.openPerformance&&this._initPerformance(),this._options.openCodeErr&&this._initCodeErrAc(),this._options.openInput&&this._initInputAc(),this._options.openClick&&this._initClickAc(),this._options.openPage&&this._initPageAc()}_initPageAc(){}_initXhrErrAc(){}_initPerformance(){}_initCodeErrAc(){}_initInputAc(){}_initClickAc(){}postAcData(){if(t(this._acData)||0===this._acData.length)return;let e=JSON.stringify({uuid:this._uuid,acData:this._acData});this._options.useImgSend?(new Image).src=`${this._options.imageUrl}?acError=${e}`:function(e={}){let t,n;e.type=(e.type||"GET").toUpperCase(),e.dataType=e.dataType||"json",e.async=e.async||!0,e.data&&(n=e.data),window.XMLHttpRequest?(t=new XMLHttpRequest,t.overrideMimeType&&t.overrideMimeType("text/xml")):t=new ActiveXObject("Microsoft.XMLHTTP"),"GET"===e.type?(t.open("GET",e.url+"?"+n,e.async),t.send(null)):"POST"===e.type&&(t.open("POST",e.url,e.async),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n?t.send(n):t.send())}({type:"POST",dataType:"json",contentType:"application/json",data:e,url:this._options.postUrl}),this._acData=[]}_mixinBeforeCreate(){}_mixinMounted(){}_mixinDestroyed(){}_mixinRouterWatch(){}}o.install=(e,t)=>function e(t,n,o){e.installed||(e.installed=!0,t.mixin({watch:{$route(e,t){}},beforeCreate(){},destroyed(){},mounted(){}}),t.prototype.$vueDataAc=new o(n))}(e,t,o),o.version="2.0.0",n&&window.Vue&&window.Vue.use(o);export default o;